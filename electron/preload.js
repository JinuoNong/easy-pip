const { contextBridge, ipcRenderer } = require('electron');

contextBridge.exposeInMainWorld('electronAPI', {
  checkEnv: () => ipcRenderer.invoke('check-env'),
  setEnv: (path) => ipcRenderer.invoke('set-env', path),
  detectEnvs: () => ipcRenderer.invoke('detect-envs'),
  getPipList: () => ipcRenderer.invoke('get-pip-list'),
  getOutdatedList: () => ipcRenderer.invoke('get-outdated-list'),
  installPackage: (pkg) => ipcRenderer.invoke('install-package', pkg),
  uninstallPackage: (pkg) => ipcRenderer.invoke('uninstall-package', pkg),
  updatePackage: (pkg) => ipcRenderer.invoke('update-package', pkg),
  updatePackages: (pkgs) => ipcRenderer.invoke('update-packages', pkgs),
  searchPackage: (query) => ipcRenderer.invoke('search-package', query),
  getPackageInfo: (pkgName) => ipcRenderer.invoke('get-package-info', pkgName),
  getDependencyTree: (pkgName, maxDepth) => ipcRenderer.invoke('get-dependency-tree', pkgName, maxDepth),
  getDependencyNode: (pkgName, path) => ipcRenderer.invoke('get-dependency-node', pkgName, path),
  getSummary: () => ipcRenderer.invoke('get-summary'),
  exportRequirements: () => ipcRenderer.invoke('export-requirements'),
  pickRequirementsFile: () => ipcRenderer.invoke('pick-requirements-file'),
  installRequirements: (path) => ipcRenderer.invoke('install-requirements', path),
  securityScan: () => ipcRenderer.invoke('security-scan'),
  getQueue: () => ipcRenderer.invoke('get-queue'),
  getLogs: () => ipcRenderer.invoke('get-logs'),
  exportLogs: () => ipcRenderer.invoke('export-logs'),
  createVenv: (options) => ipcRenderer.invoke('create-venv', options),
  listVenvs: () => ipcRenderer.invoke('list-venvs'),
  deleteVenv: (venvPath) => ipcRenderer.invoke('delete-venv', venvPath),
  checkDependencyConflicts: () => ipcRenderer.invoke('check-dependency-conflicts'),
  getPipConfig: () => ipcRenderer.invoke('get-pip-config'),
  setPipConfig: (options) => ipcRenderer.invoke('set-pip-config', options),
  removePipConfig: (options) => ipcRenderer.invoke('remove-pip-config', options),
  cancelTask: (taskId) => ipcRenderer.invoke('cancel-task', taskId),
  retryTask: (taskId) => ipcRenderer.invoke('retry-task', taskId),
  getPipCacheInfo: () => ipcRenderer.invoke('get-pip-cache-info'),
   clearPipCache: () => ipcRenderer.invoke('clear-pip-cache'),
   getPipMirrors: () => ipcRenderer.invoke('get-pip-mirrors'),
   testMirrorSpeed: (url) => ipcRenderer.invoke('test-mirror-speed', url),
   setPipMirror: (options) => ipcRenderer.invoke('set-pip-mirror', options),
   resetPipMirror: () => ipcRenderer.invoke('reset-pip-mirror'),
   scanOptimization: () => ipcRenderer.invoke('scan-optimization'),
   runOptimization: (options) => ipcRenderer.invoke('run-optimization', options),
   getPackageVersions: (packageName) => ipcRenderer.invoke('get-package-versions', packageName),
  getProjects: () => ipcRenderer.invoke('get-projects'),
  addProject: (project) => ipcRenderer.invoke('add-project', project),
  removeProject: (projectId) => ipcRenderer.invoke('remove-project', projectId),
  scanProjects: () => ipcRenderer.invoke('scan-projects'),
  exportProjectDependencies: (projectPath) => ipcRenderer.invoke('export-project-dependencies', projectPath),
  logError: (error) => ipcRenderer.invoke('log-frontend-error', error),
});